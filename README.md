# machine-learning-zoomcamp-midterm-project


This project uses data from the [Bay Wheels](https://www.lyft.com/bikes/bay-wheels/system-data) bike-sharing program to create a model to predict whether a rider departing from a certain station is probably a registered member or a casual user. Bay Wheels could leverage this insight to tailor campaigns to users at particular stations during selected times.


## Run  the project locally

To run the project locally, make sure you are using Python 3.10 and do the following:

* Install [virtualenv](https://virtualenv.pypa.io/en/latest/): `pip install virtualenv`    
* Create a virtual environment for the project:  `python3.10 -m venv midterm-project-env`
* Activate the virtual env: `source midterm-project-env/bin/activate`
* Install dependencies: `pip install -r requirements.txt`

## To train the model

Activate your virtual environment and run `python train.py` this will create `model.bin` file

## To run the prediction app

To run a Flask app that will use a model generated by `train.py`, activate your virtual environment run `flask --app predict run`. After app is available and you can POST a JSON to http://127.0.0.1:5000:

    {
        "rideable_type": "electric_bike",
        "start_station_name": "3rd_st_at_townsend_st",
        "start_hour_of_day": 9,
        "start_weekday": 9
    }

## Building the docker image

To build the image:

    docker build -t bike-share-member-prediction .

To run the image locally:

    docker container run -it --rm -p80:80 bike-share-member-prediction

To publish the image to Docker image registry to run the app on render.com for example, do the following:

    docker tag bike-share-member-prediction yourusername/bike-share-member-prediction:v0.0.1
    docker push yourusername/bike-share-member-prediction:v0.0.1

# Cloud deployment

The prediction app has been deployed to https://machine-learning-zoomcamp-midterm-poject.onrender.com. The deployment has been done manually from Render web UI by using a Docker image `hjkero/bike-share-member-prediction:v0.0.1`

You can do a POST request to the above URL with the following kind of body to predict if the user is a member or not:

    {
        "rideable_type": "electric_bike",
        "start_station_name": "3rd_st_at_townsend_st",
        "start_hour_of_day": 9,
        "start_weekday": 9
    }




